{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <link rel="canonical" href="https://getbootstrap.com/docs/4.6/examples/carousel/">
	<link href="{% static 'css/style.css' %}" rel="stylesheet">
  <script type="text/javascript" src="{% static 'js/cart.js' %}"></script>

  <title>E-commerce</title>

  <script type="text/javascript">
        var user = '{{request.user}}'

        function getToken(name){
        var cookie = null;
        if(document.cookie && document.cookie !=''){
          var cookies = document.cookie.split(';');
          for (var i = 0; i < cookies.length; i++){
            var cookie = cookies[i].trim();
            if (cookie.substring(0, name.length +1) === (name + '=')){
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
              }
            }
          }
          return cookieValue;
        }
        var csrftoken = getToken('csrftoken');

        function getCookie(name){
        var cookieArr = document.cookie.split(';');

        for (var i = 0; i < cookieArr.length; i++){
            var cookiePair = cookieArr[i].split("=");

            if (name == cookiePair[0].trim()){
              return decodeURIComponent(cookiePair[1]);
              }
            }
            return null;
          }
        var cart = JSON.parse(getCookie('cart'))
        if(cart == undefined){
          cart = {}
          console.log('Cart was created!')
          document.cookie = 'cart=' + JSON.stringify(cart) + ";domain=;path=/"
        }
        console.log('cart:', cart)
</script>

</head>

<body>

<nav class="navbar navbar-expand-md .bg-* navbar-custom fixed-top" id="navbar">
  <li class="navbar-brand">Ecomm</li>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item active">
        <a class="btn btn-primary" href="#">Login </a>
      </li>
      <li class="nav-item">
    		<a id="product-details-cart" href="{% url 'cart' %}" class="fas fa-shopping-cart"></a>
        <p id="cart-total">{{cartItems}}</p>   
      </li>
    </ul>
</nav>

<div class="container">
    {% block content %}
    {% endblock content %}
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
<script type="text/javascript" src="{% static 'js/cart.js' %}"></script>
</body>
</html>